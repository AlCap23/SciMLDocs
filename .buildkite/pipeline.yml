steps:
  - label: "Documentation"
    plugins:
      - JuliaCI/julia#v1:
          version: "1"
    command: |
      julia --project -e '
        println("--- :julia: Instantiating project")
        using Pkg
        Pkg.instantiate()
        Pkg.activate("docs")
        Pkg.instantiate()
        push!(LOAD_PATH, @__DIR__)
        println("+++ :julia: Building documentation")
        include("docs/make.jl")'
    agents:
      queue: "juliagpu"
      cuda: "*"
    env:
      DATADEPS_ALWAYS_ACCEPT: true
    if: build.message !~ /\[skip docs\]/ && !build.pull_request.draft
    timeout_in_minutes: 1000

env:
  JULIA_PKG_SERVER: "" # it often struggles with our large artifacts
  SECRET_DOCUMENTER_KEY: "fz8V8AsURsB261V1Ecr/Em02rJnS2FQa4HRPwuUmbl6BUEg2bnpJshZUAKah9Gu3K8wwcGSUK3HLsjhu6LfGs1QDdPilGYf5gzkjtlkn4m7mc/WR14oZoIHmIUm1oMd9L1NpFQ+uOsS2K7K9gQnUc2bvDzvAyLs1Umz2ID7D1ApbBwFyxbuR6D+L4BIQSW7Lvsc9Ii2gAnsc0zVvcZm9FU92NilR250Ich1O11L1kGdH4f1Sphs8qt4GeDp73kQ7T7v/XanOJYwjrwsmU6kPRu5MvDSgbUZ9h9mtXUgQHEN2SuSHos9cSf3Lra39Ae8veC1lY3Zg8Os4kteMiSnm/w==;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"
