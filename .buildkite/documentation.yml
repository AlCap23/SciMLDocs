steps:
  - label: "Documentation"
    plugins:
      - JuliaCI/julia#v1:
          version: "1"
    command: |
      julia --project -e '
        println("--- :julia: Instantiating project")
        using Pkg
        Pkg.instantiate()
        Pkg.activate("docs")
        Pkg.instantiate()
        push!(LOAD_PATH, @__DIR__)
        println("+++ :julia: Building documentation")
        include("docs/make.jl")'
    agents:
      queue: "juliagpu"
      cuda: "*"
    env:
      DATADEPS_ALWAYS_ACCEPT: true
    if: build.message !~ /\[skip docs\]/ && !build.pull_request.draft
    timeout_in_minutes: 1000

env:
  JULIA_PKG_SERVER: "" # it often struggles with our large artifacts
  SECRET_DOCUMENTER_KEY: "aWlHfNx3/ZKvDFYJ8jydS64uOt5+6rK8iBVwTEVDmNF6Yo6qfCX8Y028bxzAPHQDZVOpGPENJriF6oC1VPBeOolJdLXEJmewH5bkSEjVXRuQW7pFYZBXtHZtqHYTnVD/65rxwtKx0rloxBhrF6RuX1D+nJ/R4DtmjUYmbUvYOOQsDHf4/e4hinlIsI+iphlFpLW7IgTNKf3wr7s1FO45AJiUDK/t3Gpe9brQtl6J5jueGmuiVF1/rMM2sWA4qp1Xs9LOOOWEhwb+7b+I6WI6AC+jAcDZLbklr/HSwVZKTqRRQpY77wZqs2OoKjrj5D2ObkqQWH2IZ8ziYbQ2H0T5/g==;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"
